@model ClickServ2022.Models.Equipamento

@{
    ViewData["Title"] = "Create";
}

<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Create" name="equipamento">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="form-group">
                <div class="form-group">
                    <input asp-for="Cliente.ClienteID" class="form-control" type="hidden" />
                </div>
                <div class="form-group">
                    <input asp-for="Endereco.EnderecoID" class="form-control" type="hidden" />
                </div>
            </div>
            <div class="form-group">
                <p>Tipo</p>
                <select asp-for="Tipo"
                        asp-items="@ViewBag.Equipamento" value=@ViewBag.Equipamento id="tipo" name="tipo" onchange="showHint()" class="form-control">
                </select>
                <p id="demo"></p>
            </div>
            <div class="form-group">
                <p>Fabricante</p>
                <select asp-for="Fabricante"
                        asp-items="@ViewBag.Fabricante" id="fabricante" name="fabricante" class="form-control">
                </select>
            </div>
            <div class="form-group">
                <p>Modelo</p>
                <select asp-for="Modelo"
                        asp-items="@ViewBag.Modelo" id="modelo" name="modelo" class="form-control">
                </select>
            </div>
            <div class="form-group">
                <label asp-for="NSerie" class="control-label"></label>
                <input asp-for="NSerie" class="form-control" />
                <span asp-validation-for="NSerie" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Criar" class="btn btn-primary" />
                @Html.ActionLink("Voltar", "Details", "Endereco", new { id = Model.Endereco.EnderecoID},new { @class = "btn btn-primary"})
            </div>
        </form>
    </div>
</div>

<script src= "~/Scripts/jquery-1.10.2.js" ></script> 

<script>
    function showHint() {
     var tipo = $('#tipo').val();
     
     $.ajax({
              type: 'POST',
              url: '@Url.Action("Fabricante", "Equipamento")',
              contentType: 'application/json; charset=utf-8',
              dataType: 'json',
              data: JSON.stringify(tipo)
          }).done(function (response) {
              console.log(response);
          }).fail(function (response) {
              console.log('Error: ' + response);
          });
          
          document.getElementById("demo").innerHTML = "You selected: " + tipo;

          debugger;
    }
</script>

@section Scripts {
    @{
    await Html.RenderPartialAsync("_ValidationScriptsPartial");
}
}
